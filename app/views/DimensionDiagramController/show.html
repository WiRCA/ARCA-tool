<!--
  ~ Copyright (C) 2011 by Eero Laukkanen, Risto Virtanen, Jussi Patana, Juha Viljanen, Joona Koistinen, Pekka Rihtniemi, Mika KekÃ¤le, Roope Hovi, Mikko Valjus
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in
  ~ all copies or substantial portions of the Software.
  ~
  ~ THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  ~ IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  ~ FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
  ~ AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  ~ LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
  ~ OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
  ~ THE SOFTWARE.
  -->
<!DOCTYPE html>

<html>
    <head>
        <title>&{'showRCACase.title', rcaCase.caseName}</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta charset="${_response_encoding}">
        #{press.stylesheet 'main.css' /}
        #{press.stylesheet 'jquery-ui-1.8.16.custom.css' /}
        #{press.stylesheet 'base.css' /}
        #{press.stylesheet src:'bootstrap.min.css', compressed:false /}
        #{press.stylesheet 'arcaeditor.css' /}
        #{press.compressed-stylesheet /}

        <link rel="shortcut icon" type="image/png" href="@{'/public/images/favicon.png'}">
        <!--[if lt IE 9]>
        <script src="${'/public/javascripts/excanvas.compiled.js'}" type="text/javascript"></script>
        <![endif]-->
        #{press.script src:'jquery-1.7.1.min.js', compress:false /}
        #{press.script 'bootstrap-twipsy.js' /}
        #{press.script 'bootstrap-popover.js' /}
        #{press.script src:'jquery-ui-1.8.16.custom.min.js', compress:false /}
        #{press.script src:'jquery.tagsinput.js', compress:false /}
        #{press.script 'smalljit.js' /}
        #{press.script 'commonvisualization.js' /}
        #{press.script 'dimension-diagram.js' /}
        #{press.script 'jQuery.radmenu.js' /}
        #{press.compressed-script /}

        <script type="text/javascript">
            // Google Analytics
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-28831715-1']);
            _gaq.push(['_trackPageview']);

            (function() {
                var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
                var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
            })();
        </script>
    </head>

    <body>
        #{navigation /}

        <div id="dimensionHelp">
            &{'dimensionDiagram.help'} <a href="@{PublicRCACaseController.show(rcaCase.URLHash)}">&{'dimensionDiagram.back'}</a>
        </div>

        <div id="graph"></div>

        <div id="radial_menu" style="position: absolute; display: none; width: 0; height: 0;">
            <ul class="list">
                <li class="item radmenu-button" id="radmenu-event-openEdge">
                    <a href="#" rel='twipsy' data-placement="left" title='&{'editor.openEdge'}'>
                        <img src="@{'/public/images/icons/opening.png'}" height="36" width="36"
                             style="margin-left: -8px; margin-top: -8px" />
                    </a>
                </li>
                <li class="item radmenu-button" id="radmenu-event-nameEdge">
                    <a href="#" rel='twipsy' data-placement="bottom" title='&{'editor.nameEdge'}'>
                        <img src="@{'/public/images/icons/naming.png'}" height="36" width="36"
                             style="margin-left: -8px; margin-top: -8px" />
                    </a>
                </li>
            </ul>
        </div>

        <div id="zoomSlider">
            <img id="zoomin" src="@{'/public/images/zoom-in.png'}" onclick="incZoomSlider()" />
            <div id="slider-vertical"></div>
            <img id="zoomout" src="@{'/public/images/zoom-out.png'}" onclick="decZoomSlider()" />
        </div>

        <div id="configurationButton">
            <img id="configurationImage" height="25" width="25" onclick="configurationView()" src="@{'/public/images/icons/cog.png'}" alt="&{'dimensionDiagramConfiguration.link'}" />
        </div>

        <div align="left" id="configurationArea" hidden=true>
            <i>&{'dimensionDiagramConfiguration.weight'}</i><br>
            <b>
                <input title='&{'dimensionDiagramConfiguration.weightOnLegend'}' type="radio" name="groupCauses" value="1" onclick="showSimpleGraph(0, 0, [])" checked> &{'dimensionDiagramConfiguration.weightOn'}<br>
                <input title='&{'dimensionDiagramConfiguration.weightOffLegend'}' type="radio" name="groupCauses" value="0" onclick="showSimpleGraph(0, 0, [])"> &{'dimensionDiagramConfiguration.weightOff'}<br>
            </b>
            <br>
            <i>&{'dimensionDiagramConfiguration.color'}</i><br>
            <b>
                <input title='&{'dimensionDiagramConfiguration.colorOnLegend'}' type="radio" name="groupProposed" value="1" onclick="showSimpleGraph(0, 0, [])" checked> &{'dimensionDiagramConfiguration.colorOn'}<br>
                <input title='&{'dimensionDiagramConfiguration.colorOffLegend'}' type="radio" name="groupProposed" value="0" onclick="showSimpleGraph(0, 0, [])"> &{'dimensionDiagramConfiguration.colorOff'}<br>
            </b>
            <br>
            <i>&{'dimensionDiagramConfiguration.glow'}</i><br>
            <b>
                <input title='&{'dimensionDiagramConfiguration.glowOnLegend'}' type="radio" name="groupCorrections" value="1" onclick="showSimpleGraph(0, 0, [])" checked> &{'dimensionDiagramConfiguration.glowOn'}<br>
                <input title='&{'dimensionDiagramConfiguration.glowOffLegend'}' type="radio" name="groupCorrections" value="0" onclick="showSimpleGraph(0, 0, [])"> &{'dimensionDiagramConfiguration.glowOff'}<br>
            </b>
        </div>

        <script type="text/javascript">
window.arca = {
    rcaCaseId: ${rcaCase.id},
    rootNode: {
        id: 0,
        name: "${rcaCase.problem.name}"
    },
    classifications: {
    #{list rcaCase.getClassifications(), as:'classification'}
        ${classification.id}: {
            id: ${classification.id},
            title: "${classification.name.escapeJavaScript().raw()}",
            dimension: ${classification.classificationDimension},
            abbreviation: "${classification.abbreviation.escapeJavaScript().raw()}",
            explanation: "${classification.explanation.escapeJavaScript().raw()}",
            relevance: ${classificationRelevance.get(classification.id) ?: 0}
        }${classification_isLast ? '' : ','}
    #{/list}
    },
    relationMap: ${relations.toJson().raw()}
};
        </script>
    </body>
</html>