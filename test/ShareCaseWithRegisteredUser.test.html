#{fixture delete:'all',load:'data.yml' /}
#{selenium}
	open('/')
	verifyTextPresent('Index page')
	type('id=username','admin@local')
	type('id=password','admin')
	clickAndWait('id=signin')
	verifyTextPresent('Admin user')
	clickAndWait('id=createRCACase-link')
	type('id=caseName','test case')
	select('id=caseTypeValue','value=2')
	type('id=description','asd')
	type('id=caseGoals','as')
	type('id=caseGoals','asd')
	type('id=companyName','asd')
	select('id=companySize','label=301->')
	type('id=companyProducts','asd')
	verifyTextPresent('Luo uusi RCA analyysi')
	clickAndWait('id=create')
	open('/')
	verifyTextPresent('test case')
	verifyTextPresent(' Jaa..')
	clickAt('//*[text()="Jaa.."]')
	pause('1000')
	verifyTextPresent('Kutsu sähköpostilla')
	click('css=input[type="submit"]')
	click('css=input[type="submit"]')
	type('id=rcacase-share-dialog-invitedEmail-input','roope')
	click('css=input[type="submit"]')
	pause('1000')
	verifyTextPresent('rcacase.share.dialog.invalidEmail')
	type('id=rcacase-share-dialog-invitedEmail-input','roope@roope@roope')
	click('css=input[type="submit"]')
	verifyTextPresent('rcacase.share.dialog.invalidEmail')
	type('id=rcacase-share-dialog-invitedEmail-input','roope@roope')
	click('css=input[type="submit"]')
	verifyTextPresent('rcacase.share.dialog.invalidEmail')
	type('id=rcacase-share-dialog-invitedEmail-input','roope@roope.xxx')
	click('css=input[type="submit"]')
	pause('1000')
	verifyTextPresent('roope@roope.xxx')
	click('//button[@type='button']')
	verifyTextPresent('Admin user')
	clickAndWait('id=logout-link')
	verifyTextPresent('Index page')
	clickAndWait('id=register-link')
	type('id=nameFieldRegister','testikäyttäjä')
	type('id=emailFieldRegister','roope@roope.xxx')
	type('id=passwordFieldRegister','xxx')
	type('id=password2FieldRegister','xxx')
	clickAndWait('id=registerButton')
	verifyTextPresent('Lomake sisältää virheitä')
	type('id=emailFieldRegister','roope@roope.roope')
	type('id=passwordFieldRegister','xxx')
	type('id=password2FieldRegister','xxx')
	clickAndWait('id=registerButton')
	pause('1000')
	verifyTextPresent('testikäyttäjä')
	clickAndWait('id=logout-link')
	verifyTextPresent('Index page')
	type('id=username','admin@local')
	type('id=password','admin')
	clickAndWait('id=signin')
	verifyTextPresent('Admin user')
	clickAt('//*[text()="Jaa.."]')
	pause('1000')
	verifyTextPresent('Kutsu sähköpostilla')
	type('id=rcacase-share-dialog-invitedEmail-input','roope@roope.roope')
	click('css=input[type="submit"]')
	pause('1000')
	verifyTextPresent('roope@roope.roope')
	verifyTextPresent('testikäyttäjä')
	click('//button[@type='button']')
	clickAndWait('id=logout-link')
	type('id=username','roope@roope.roope')
	type('id=password','xxx')
	clickAndWait('id=signin')
	verifyTextPresent('test case ')
	clickAndWait('link=test case')
	open('/')
	clickAndWait('id=logout-link')
	type('id=username','admin@local')
	type('id=password','admin')
	clickAndWait('id=signin')
	clickAt('//*[text()="Jaa.."]')
	click('css=input[type="submit"]')
	click('css=input[type="submit"]')
	click('//button[@type='button']')
	clickAndWait('id=logout-link')
#{/selenium}