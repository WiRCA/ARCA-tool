#{fixture delete:'all',load:'data.yml' /}
#{selenium}
    open('/')
    type('id=username','admin@local')
    type('id=password','admin')
    clickAndWait('id=signin')
    verifyTextPresent('Admin user')
    clickAndWait('css=img[alt="Suomi"]')
    clickAndWait('link=Luo uusi RCA analyysi')
    verifyTextPresent('Luo uusi RCA analyysi')
    type('id=caseName','Irmelin testikeissi')
    select('id=caseTypeValue','label=Other')
    type('id=description','Irmeli on surullinen')
    type('id=caseGoals','Irmeli ei ole surullinen')
    type('id=companyName','Irmelin pulla')
    select('id=companySize','label=1-10')
    type('id=companyProducts','Pullapitkot ja hillomunkit')
    clickAndWait('id=create')
    open('/')
    verifyTextPresent('Irmelin testikeissi')
    verifyTextPresent('Admin user')
    clickAt('//*[text()="Jaa.."]')
    pause('100')
    verifyTextPresent('Kutsu sähköpostilla')
    verifyTextPresent('admin@local')
    type('id=rcacase-share-dialog-invitedEmail-input','kalevi@kalevi.kalevi')
    click('css=input[type="submit"]')
    pause('1000')
    verifyTextPresent('kalevi@kalevi.kalevi')
    click('id=remove-user-share')
    pause('100')
    verifyTextNotPresent('kalevi@kalevi.kalevi')
    type('id=rcacase-share-dialog-invitedEmail-input','kalevi@kalevi.kalevi')
    click('css=input[type="submit"]')
    pause('100')
    verifyTextPresent('kalevi@kalevi.kalevi')
    click('//button[@type='button']')
    verifyTextPresent('Admin user')
    clickAndWait('id=logout-link')
    verifyTextPresent('Index page')
    type('id=username','admin@local')
    type('id=password','admin')
    clickAndWait('id=signin')
    verifyTextPresent('Admin user')
    verifyTextPresent('Irmelin testikeissi')
    clickAt('//*[text()="Jaa.."]')
    pause('100')
    verifyTextPresent('kalevi@kalevi.kalevi')
    verifyTextPresent('admin@local')
    click('id=remove-user-share')
    pause('100')
    verifyTextNotPresent('kalevi@kalevi.kalevi')
    click('//button[@type='button']')
    clickAndWait('id=logout-link')
    type('id=username','admin@local')
    type('id=password','admin')
    clickAndWait('id=signin')
    clickAt('//*[text()="Jaa.."]')
    verifyTextNotPresent('kalevi@kalevi.kalevi')
    pause('100')
    verifyTextPresent('admin@local')
    pause('100')
    click('//button[@type='button']')
    open('/logout')
#{/selenium}

